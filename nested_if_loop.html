<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Nested if – Grade Checker</title>
    <style>
      :root {
        --bg: #f8f9fa;
        --card: white;
        --text: #2c3e50;
        --code-bg: #2c3e50;
        --code-text: #f8f8f2;
        --primary: #3498db;
        --success: #27ae60;
        --danger: #e74c3c;
        --warning: #f1c40f;
        --gray: #95a5a6;
      }
      [data-theme="dark"] {
        --bg: #1e1e1e;
        --card: #2d2d2d;
        --text: #ecf0f1;
        --code-bg: #1a1a1a;
        --code-text: #f8f8f2;
      }
      body {
        font-family: "Segoe UI", sans-serif;
        background: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 20px;
        transition: 0.3s;
      }
      .container {
        max-width: 1000px;
        margin: 20px auto;
        background: var(--card);
        padding: 30px;
        border-radius: 16px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      }
      h1 {
        text-align: center;
        color: var(--primary);
        margin: 0 0 8px;
      }
      .subtitle {
        text-align: center;
        color: var(--gray);
        font-size: 15px;
        margin-bottom: 25px;
      }
      .input-area {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: 20px;
        align-items: center;
      }
      input[type="number"] {
        flex: 1;
        min-width: 120px;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 15px;
      }
      .code {
        background: var(--code-bg);
        color: var(--code-text);
        padding: 18px;
        border-radius: 10px;
        font-family: "Fira Code", monospace;
        margin: 20px 0;
        line-height: 1.7;
      }
      .line {
        padding-left: 45px;
        position: relative;
        counter-increment: line;
      }
      .line::before {
        content: counter(line);
        position: absolute;
        left: 12px;
        color: #666;
        font-size: 13px;
      }
      .line.active {
        background: rgba(241, 196, 15, 0.25);
        border-left: 4px solid var(--warning);
        padding-left: 41px;
      }

      .var-display {
        display: flex;
        justify-content: center;
        gap: 60px;
        margin: 20px 0;
        font-size: 20px;
        font-weight: bold;
        color: var(--text);
      }
      .var-item span {
        color: var(--success);
      }

      .output-box {
        width: 420px;
        height: 100px;
        background: #f1f8ff;
        border: 3px solid #3498db;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 30px auto;
        font-size: 22px;
        font-weight: bold;
        color: #2c3e50;
        box-shadow: 0 6px 20px rgba(52, 152, 219, 0.2);
        text-align: center;
        padding: 10px;
      }

      .current-value {
        text-align: center;
        margin: 25px 0;
        font-size: 23px;
        font-weight: bold;
        color: var(--success);
        min-height: 38px;
      }
      .current-value.hidden {
        display: none;
      }

      .step-counter {
        text-align: center;
        font-size: 19px;
        color: var(--primary);
        margin: 12px 0;
      }
      .controls {
        display: flex;
        justify-content: center;
        gap: 12px;
        flex-wrap: wrap;
        margin: 25px 0;
      }
      button {
        padding: 11px 20px;
        font-size: 15px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.25s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      button:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }
      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
      }
      button.play {
        background: var(--success);
        color: white;
      }
      button.next {
        background: var(--primary);
        color: white;
      }
      button.reset {
        background: var(--gray);
        color: white;
      }
      button.speed {
        background: #e67e22;
        color: white;
      }
      button.download {
        background: #8e44ad;
        color: white;
      }
      button.theme {
        background: #34495e;
        color: white;
      }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/firacode@6/distr/fira_code.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <h1>Python <code>nested if</code> – Grade Checker</h1>
      <p class="subtitle">Step-by-step: Do you get an A+?</p>

      <!-- Inputs -->
      <div class="input-area">
        <input
          type="number"
          id="inputScore"
          placeholder="Your score"
          value="85"
          min="0"
          max="100"
        />
        <input
          type="number"
          id="inputAttendance"
          placeholder="Attendance %"
          value="90"
          min="0"
          max="100"
        />
        <button id="updateBtn" class="next">Update</button>
      </div>

      <!-- Code block -->
      <div class="code" id="codeBlock"></div>

      <!-- Simple text display -->
      <div class="var-display">
        <div class="var-item">score : <span id="dispScore">85</span></div>
        <div class="var-item">
          attendance : <span id="dispAttendance">90</span>
        </div>
      </div>

      <!-- Output -->
      <div class="output-box" id="outputBox">Output is...</div>

      <!-- Instruction -->
      <div class="current-value" id="currentValue">
        Click “Next Step” to begin…
      </div>
      <div class="step-counter" id="stepCounter">Step 0 / 3</div>

      <!-- Controls -->
      <div class="controls">
        <button class="play" id="playBtn">Play</button>
        <button class="next" id="nextBtn">Next Step</button>
        <button class="reset" id="resetBtn">Reset</button>
        <button class="speed" id="speedBtn">Speed: Medium</button>
        <button class="download" id="downloadBtn">Download</button>
        <button class="theme" id="themeBtn">Dark Mode</button>
      </div>
    </div>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
      const speeds = { slow: 2200, medium: 1400, fast: 700 };
      let speed = "medium";

      const inputScore = document.getElementById("inputScore");
      const inputAttendance = document.getElementById("inputAttendance");
      const updateBtn = document.getElementById("updateBtn");
      const codeBlock = document.getElementById("codeBlock");
      const dispScore = document.getElementById("dispScore");
      const dispAttendance = document.getElementById("dispAttendance");
      const outputBox = document.getElementById("outputBox");
      const currentValue = document.getElementById("currentValue");
      const stepCounter = document.getElementById("stepCounter");
      const playBtn = document.getElementById("playBtn");
      const nextBtn = document.getElementById("nextBtn");
      const resetBtn = document.getElementById("resetBtn");
      const speedBtn = document.getElementById("speedBtn");
      const downloadBtn = document.getElementById("downloadBtn");
      const themeBtn = document.getElementById("themeBtn");

      let score,
        attendance,
        step = 0,
        interval = null,
        playing = false;

      function buildCodeBlock() {
        score = parseInt(inputScore.value);
        if (isNaN(score)) score = 0;
        attendance = parseInt(inputAttendance.value);
        if (isNaN(attendance)) attendance = 0;

        const indent = "&nbsp;&nbsp;&nbsp;&nbsp;";
        const indent2 = indent + indent;

        const lines = [
          `score = ${score}`,
          `attendance = ${attendance}`,
          ``,
          `if score >= 80:`,
          `${indent}if attendance >= 85:`,
          `${indent2}print("Excellent! You get an A+")`,
          `${indent}else:`,
          `${indent2}print("Good score! Try to attend more.")`, // ← SIMPLIFIED
          `else:`,
          `${indent}print("Score too low. Study more!")`, // ← SIMPLIFIED
        ];

        codeBlock.innerHTML = "";
        lines.forEach((txt, idx) => {
          const div = document.createElement("div");
          div.className = "line";
          div.id = `line${idx + 1}`;
          div.innerHTML = txt || "&nbsp;";
          codeBlock.appendChild(div);
        });

        dispScore.textContent = score;
        dispAttendance.textContent = attendance;
      }

      function highlight(n) {
        document
          .querySelectorAll(".line")
          .forEach((l, i) => l.classList.toggle("active", i + 1 === n));
      }

      function nextStep() {
        if (step >= 3) {
          nextBtn.disabled = true;
          clearInterval(interval);
          playing = false;
          playBtn.textContent = "Play";
          return;
        }

        step++;
        currentValue.classList.add("hidden");
        stepCounter.textContent = `Step ${step} / 3`;

        let result = "";

        if (step === 1) {
          if (score >= 80) {
            highlight(4);
          } else {
            highlight(9);
          }
        }

        if (step === 2) {
          if (score >= 80) {
            if (attendance >= 85) {
              highlight(5);
            } else {
              highlight(7);
            }
          }
        }

        if (step === 3) {
          if (score >= 80) {
            if (attendance >= 85) {
              highlight(6);
              result = "Excellent! You get an A+";
            } else {
              highlight(8);
              result = "Good score! Try to attend more.";
            }
          } else {
            highlight(10);
            result = "Score too low. Study more!";
          }
        }

        if (result) {
          outputBox.innerHTML = `<div>${result}</div>`;
        }
      }

      function resetUI() {
        currentValue.textContent = "Click “Next Step” to begin…";
        currentValue.classList.remove("hidden");
        stepCounter.textContent = "Step 0 / 3";
        document
          .querySelectorAll(".line")
          .forEach((l) => l.classList.remove("active"));
        outputBox.innerHTML = "Output is...";
        step = 0;
        nextBtn.disabled = false;
        clearInterval(interval);
        playing = false;
        playBtn.textContent = "Play";
      }

      function updateAll() {
        buildCodeBlock();
        resetUI();
      }

      function togglePlay() {
        if (playing) {
          clearInterval(interval);
          playing = false;
          playBtn.textContent = "Play";
        } else {
          playing = true;
          playBtn.textContent = "Pause";
          interval = setInterval(() => {
            nextStep();
            if (nextBtn.disabled) togglePlay();
          }, speeds[speed]);
        }
      }

      function cycleSpeed() {
        const o = ["slow", "medium", "fast"];
        speed = o[(o.indexOf(speed) + 1) % 3];
        speedBtn.textContent = `Speed: ${
          speed.charAt(0).toUpperCase() + speed.slice(1)
        }`;
        if (playing) {
          clearInterval(interval);
          interval = setInterval(nextStep, speeds[speed]);
        }
      }

      function download() {
        html2canvas(document.querySelector(".container")).then((c) => {
          const a = document.createElement("a");
          a.download = "grade-checker-simple.png";
          a.href = c.toDataURL();
          a.click();
        });
      }

      function toggleTheme() {
        const dark = document.body.getAttribute("data-theme") === "dark";
        document.body.setAttribute("data-theme", dark ? "light" : "dark");
        themeBtn.textContent = dark ? "Dark Mode" : "Light Mode";
      }

      // Events
      updateBtn.addEventListener("click", updateAll);
      nextBtn.addEventListener("click", nextStep);
      resetBtn.addEventListener("click", updateAll);
      playBtn.addEventListener("click", togglePlay);
      speedBtn.addEventListener("click", cycleSpeed);
      downloadBtn.addEventListener("click", download);
      themeBtn.addEventListener("click", toggleTheme);
      inputScore.addEventListener("input", updateAll);
      inputAttendance.addEventListener("input", updateAll);

      // Init
      updateAll();
    </script>
  </body>
</html>
